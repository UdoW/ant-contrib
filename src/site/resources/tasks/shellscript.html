<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Ant-contrib Tasks: ShellScript</title>
    <meta name="generator" content="OpenOffice.org 644  (Linux)"/>
    <meta name="created" content="20030313;10303100"/>
    <meta name="changed" CONTENT="20030318;15221000"/>
  </head>
  <body lang="en-US" dir="LTR">
    <h1>ShellScript</h1>
    <p>
      Task definition for the <code>shellscript</code> task. This task
      allows the user to execute a script against a particular shell
      program on a machine. It is an extension of the &quot;exec&quot;
      task, and as such, supports the same attributes. One can however
      use &quot;shell&quot; instead of &quot;executable&quot;. Also
      the &quot;command&quot; attribute is not allowed. See the ANT
      documentation for a description of the &lt;exec&gt; task
      parameters.
    </p>
    <h2>Parameters</h2>
    <table border="1" cellpadding="" cellspacing="0">
      <col>
      <col>
      <col>
      <tr>
	<th>
	  <p>Attribute</p>
	</th>
	<th>
	  <p>Description</p>
	</th>
	<th>
	  <p>Required</p>
	</th>
      </tr>
      <tr>
	<td valign="top">
	  <p>shell</p>
	</td>
	<td valign="top">
	  <p>
	    The name of the shell executable which is to be
	    executed. This shell must support taking a single
	    parameter whose value is a script file which is to be
	    executed.
	  </p>
	</td>
	<td>
	  <p>Yes</p>
	</td>
      </tr>
      <tr>
	<td valign="top">
	  <p>executable</p>
	</td>
	<td valign="top">
	  <p>Same as “shell”</p>
	</td>
	<td></td>
      </tr>
      <tr valign="top">
	<td>
	  <p>tmpsuffix</p>
	</td>
	<td>
	  <p>
	    The contents of the script are placed in a temporary
	    file. This attribute is the extension to
	    use. <b>note: </b>The value must contain any dots
	    required. This attribute is usefull for using script files
	    with windows
	  </p>
	</td>
	<td>
	  <p>No</p>
	</td>
      </tr>
      <tr valign="top">
	<td>
	  <p>inputstring</p>
	</td>
	<td>
	  <p>This is placed in the script file.</p>
	</td>
	<td>
	  <p>No</p>
	</td>
	</tr>
    </table>
    <h2>Nested Text</h2>
    <p>
      Any nested text is treated as the contents of the script that is
      to be executed within the shell. Embedded ant properties will be
      converted.
    </p>
    <h2>Examples</h2>
    <pre>        &lt;shellscript shell=&quot;bash&quot; dir=&quot;${src.mib.dir}&quot;&gt;
           mibgen -i ../include mib.mib -c ${build.gen.dir}/generated.cpp
           mibgen -i ../include mib.mib -h ${build.gen.dir}/generated.h
        &lt;/shellscript&gt;

        &lt;shellscript shell=&quot;sed&quot; outputproperty=&quot;sed.output&quot;&gt;
          &lt;arg value=&quot;-e&quot;/&gt;
          &lt;arg value=&quot;s/FOO/BAR/g&quot;/&gt;
          FOO bar bar bar FOO bar bar
        &lt;/shellscript&gt;

        &lt;shellscript shell=&quot;cmd.exe&quot; tmpsuffix=&quot;.bat&quot;&gt;
          &lt;arg value=&quot;/c&quot;/&gt;
          &lt;arg value=&quot;call&quot;/&gt;
          echo hello world
        &lt;/shellscript&gt;

        &lt;shellscript shell=&quot;bash&quot;
          dir=&quot;${build.bin.dir}&quot;
          inputstring=&quot;ls -rt | tail -n 1&quot;
          outputproperty=&quot;last.bin.file&quot;/&gt;

        &lt;shellscript executable=&quot;perl&quot;&gt;
          print STDOUT &quot;Hello World!\n&quot;;
        &lt;/shellscript&gt;

        &lt;shellscript shell=&quot;sh&quot; dir=&quot;${thirdparty.dist.dir}/lib&quot;&gt;
          rm *.so
          for file in *.0
          do
            x=`echo $file | sed -e's/.0.1.0//'`
            ln -s $file $x
          done
        &lt;/shellscript&gt;</pre>
    <p><b>Warning:</b></p>
    <p>
      One should be carefull in using <i>shellscript</i>, as overuse
      will make your build files difficult to understand, to maintain
      and to support multiplatform builds. Use of <i>cygwin</i> in a
      windows environment will help. However one should strive to use
      the java tasks whereever possible.
    </p>
    <hr/>
    <p align="center">
      Copyright &copy; 2003 Ant-Contrib Project. All rights Reserved.
    </p>
  </body>
</html>
